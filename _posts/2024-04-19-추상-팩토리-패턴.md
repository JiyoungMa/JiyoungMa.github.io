---
layout: post
title:  "3. 추상 팩토리(Abstract factory) 패턴"
date:   2024-04-19 00:42:00 +0900
categories: DesignPattern
---

# 3. 추상 팩토리(Abstract factory) 패턴

> **😉 :** '코딩으로 학습하는 GoF의 디자인 패턴' 공부 기록입니다.

<h4>추상 팩토리 패턴이란? </h4>

<img width="805" alt="image" src="https://github.com/JiyoungMa/JiyoungMa.github.io/assets/50768959/cfff2b6a-f9a2-4efa-a2f6-5d7983a2d3bc">

: 관련있는 여러 인스턴스를 만들어주는 팩토리를 추상화된 형태로 정의하는 패턴
팩토리 메소드 패턴과 매우 비슷하지만 초점이 클라이언트쪽에 있다고 생각하면 된다.

<h4>AS-IS</h4>

해당 부분은 이전 글인 [팩토리 메소드 패턴](https://jiyoungma.github.io/posts/%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%86%8C%EB%93%9C-%ED%8C%A8%ED%84%B4/)의 코드를 기반으로 하기 때문에 해당 글을 먼저 읽는 것을 추천합니다.

```Java
public class Book {
    private String type;

    private String color;

    private int pages;

    private Author author;
    
    private Publisher publisher;
}

public class NovelBookFactory implements BookFactory{
    @Override
    public Book createBook() {
        Book book = new NovelBook();
        book.setAuthor(new Author());
        book.setPublisher(new Publisher());
        return book;
    }
}
```

팩토리 메소드 패턴의 TO-BE의 Book에 작가(Author)와 출판사(Publisher)가 추가된 상황이라고 하자. 만약에 NovelBookFactory에서 책의 작가나 출판사를 이 상태에서 변경하려면 NovelBookFactory 코드에 직접적인 수정이 필요하다.

<h4>TO-BE</h4>

```Java
public interface BookPartsFactory{
    Author createAuthor();
    Publisher createPublisher();
}

public class NovelBookPartsFactory implements BookPartsFactory{
    @Override
    public Author createAuthor(){
        return new NovelAuthor(); // interface Author의 구현체
    }

    @Override
    public Publisher createPublisher(){
        return new NovelPublisher(); // interface Publisher의 구현체
    }
}

public class NovelBookFactory implements BookFactory{
    private BookPartsFactory bookPartsFactory;

    public NovelBookFactory(BookPartsFactory bookPartsFactory){
        this.bookPartsFactory = bookPartsFactory
    }

    @Override
    public Book createBook() {
        Book book = new NovelBook();
        book.setAuthor(bookPartsFactory.createAuthor());
        book.setPublisher(bookPartsFactory.creaetPublisher());
        return book;
    }
}
```

하지만 위와 같이 factory interface를 사용한다면, NovelBookFactory 생성 시 외부에서 주입하는 BookPartsFactory만 필요에 맞게 수정하면 책의 구성요소를 바꿀 수 있다.

```Java
public class Example{
    public static void main(String[] args){
        BookFactory bookFactory = new NovelBookFactory(new NovelBookPartsFactory());
        Book book = bookFactory.createBook();
    }
}
```