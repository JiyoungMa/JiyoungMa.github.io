---
layout: post
title:  "3. μ¶”μƒ ν©ν† λ¦¬(Abstract factory) ν¨ν„΄"
date:   2024-04-19 00:42:00 +0900
categories: DesignPattern
---

# 3. μ¶”μƒ ν©ν† λ¦¬(Abstract factory) ν¨ν„΄

> **π‰ :** 'μ½”λ”©μΌλ΅ ν•™μµν•λ” GoFμ λ””μμΈ ν¨ν„΄' κ³µλ¶€ κΈ°λ΅μ…λ‹λ‹¤.

<h4>μ¶”μƒ ν©ν† λ¦¬ ν¨ν„΄μ΄λ€? </h4>

<img width="805" alt="image" src="https://github.com/JiyoungMa/JiyoungMa.github.io/assets/50768959/cfff2b6a-f9a2-4efa-a2f6-5d7983a2d3bc">

: κ΄€λ ¨μλ” μ—¬λ¬ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤μ–΄μ£Όλ” ν©ν† λ¦¬λ¥Ό μ¶”μƒν™”λ ν•νƒλ΅ μ •μν•λ” ν¨ν„΄
ν©ν† λ¦¬ λ©”μ†λ“ ν¨ν„΄κ³Ό λ§¤μ° λΉ„μ·ν•μ§€λ§ μ΄μ μ΄ ν΄λΌμ΄μ–ΈνΈμ½μ— μλ‹¤κ³  μƒκ°ν•λ©΄ λλ‹¤.

<h4>μ μ© μμ‹</h4>

**AS-IS**

ν•΄λ‹Ή λ¶€λ¶„μ€ μ΄μ „ κΈ€μΈ [ν©ν† λ¦¬ λ©”μ†λ“ ν¨ν„΄](https://jiyoungma.github.io/posts/%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%86%8C%EB%93%9C-%ED%8C%A8%ED%84%B4/)μ μ½”λ“λ¥Ό κΈ°λ°μΌλ΅ ν•κΈ° λ•λ¬Έμ— ν•΄λ‹Ή κΈ€μ„ λ¨Όμ € μ½λ” κ²ƒμ„ μ¶”μ²ν•©λ‹λ‹¤.

```Java
public class Book {
    private String type;

    private String color;

    private int pages;

    private Author author;
    
    private Publisher publisher;
}

public class NovelBookFactory implements BookFactory{
    @Override
    public Book createBook() {
        Book book = new NovelBook();
        book.setAuthor(new Author());
        book.setPublisher(new Publisher());
        return book;
    }
}
```

ν©ν† λ¦¬ λ©”μ†λ“ ν¨ν„΄μ TO-BEμ Bookμ— μ‘κ°€(Author)μ™€ μ¶νμ‚¬(Publisher)κ°€ μ¶”κ°€λ μƒν™©μ΄λΌκ³  ν•μ. λ§μ•½μ— NovelBookFactoryμ—μ„ μ±…μ μ‘κ°€λ‚ μ¶νμ‚¬λ¥Ό μ΄ μƒνƒμ—μ„ λ³€κ²½ν•λ ¤λ©΄ NovelBookFactory μ½”λ“μ— μ§μ ‘μ μΈ μμ •μ΄ ν•„μ”ν•λ‹¤.

**TO-BE**

```Java
public interface BookPartsFactory{
    Author createAuthor();
    Publisher createPublisher();
}

public class NovelBookPartsFactory implements BookPartsFactory{
    @Override
    public Author createAuthor(){
        return new NovelAuthor(); // interface Authorμ κµ¬ν„μ²΄
    }

    @Override
    public Publisher createPublisher(){
        return new NovelPublisher(); // interface Publisherμ κµ¬ν„μ²΄
    }
}

public class NovelBookFactory implements BookFactory{
    private BookPartsFactory bookPartsFactory;

    public NovelBookFactory(BookPartsFactory bookPartsFactory){
        this.bookPartsFactory = bookPartsFactory
    }

    @Override
    public Book createBook() {
        Book book = new NovelBook();
        book.setAuthor(bookPartsFactory.createAuthor());
        book.setPublisher(bookPartsFactory.creaetPublisher());
        return book;
    }
}
```

ν•μ§€λ§ μ„μ™€ κ°™μ΄ factory interfaceλ¥Ό μ‚¬μ©ν•λ‹¤λ©΄, NovelBookFactory μƒμ„± μ‹ μ™Έλ¶€μ—μ„ μ£Όμ…ν•λ” BookPartsFactoryλ§ ν•„μ”μ— λ§κ² μμ •ν•λ©΄ μ±…μ κµ¬μ„±μ”μ†λ¥Ό λ°”κΏ€ μ μλ‹¤.

```Java
public class Example{
    public static void main(String[] args){
        BookFactory bookFactory = new NovelBookFactory(new NovelBookPartsFactory());
        Book book = bookFactory.createBook();
    }
}
```

μ΄λ¥Ό ν†µν•΄ μ¶”μƒ ν©ν† λ¦¬ ν¨ν„΄μ€ κ°λ°© νμ‡„ μ›μΉ™ (Open Closed Principal)μ„ μ§€ν‚¬ μ μκ² ν•λ” λ””μμΈ ν¨ν„΄μ„μ„ μ• μ μλ‹¤.

<h4>ν©ν† λ¦¬ λ©”μ†λ“ ν¨ν„΄ vs μ¶”μƒ ν©ν† λ¦¬ ν¨ν„΄ </h4>

λ‘ λ‹¤ κ°μ²΄ μƒμ„± κ³Όμ •μ„ μ¶”μƒν™”ν• μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ‹¤.
ν•μ§€λ§ μ–΄λ κ΄€μ μ΄λƒμ— λ”°λΌ λ‹¬λΌμ§„λ‹¤κ³  ν•  μ μλ‹¤.
ν©ν† λ¦¬ λ©”μ†λ“ ν¨ν„΄μ€ κ°μ²΄λ¥Ό λ§λ“λ” κ³Όμ •, κµ¬ν„ν•λ” λ°©λ²•(inheritance)μ— λ” μ§‘μ¤‘λμ–΄μλ‹¤κ³  λ³΄λ©΄ λλ‹¤. μΈμ¤ν„΄μ¤λ¥Ό λ§λ“λ” κ³Όμ •μ„ ν©ν† λ¦¬λ΅ μ¨κΈ°κ³ , ν©ν† λ¦¬λ¥Ό μ κ³µν•λ‹¤. μ¦‰, κµ¬μ²΄μ μΈ κ°μ²΄ μƒμ„± κ³Όμ •μ„ ν•μ„ λλ” κµ¬μ²΄μ μΈ ν΄λμ¤λ΅ μ®κΈ΄λ‹¤.
κ±°μ λΉ„μ·ν•μ§€λ§, λ³΄λ” κ΄€μ μ„ ν©ν† λ¦¬λ¥Ό μ‚¬μ©ν•λ” λ°©λ²•(composition)μ— μ΄μ μ„ λ‘κ³  λ³΄λ”κ² μ¶”μƒ ν©ν† λ¦¬ ν¨ν„΄μ΄λ‹¤. ν©ν† λ¦¬λ¥Ό ν†µν•΄μ„ μ¶”μƒν™”λ μΈν„°νμ΄μ¤λ§ ν΄λΌμ΄μ–ΈνΈκ°€ μ“Έ μ μκ² ν•΄μ„ κµ¬μ²΄μ μΈ ν΄λμ¤μ— μμ΅΄ν•μ§€ μ•κ³  μ—¬λ¬ κ°μ²΄λ¥Ό λ§λ“¤ μ μκ² ν•λ‹¤.

<br>

**κ³µλ¶€ν•λ‹¤κ°€ μƒκ°λ‚ μ **

μ¤ν”„λ§μ„ μ‚¬μ©ν•΄ λ³Έ μ‚¬λμ΄λΌλ©΄ μ΄κ±Έ λ³΄μλ§μ λ°”λ΅ Bean κ°λ…μ΄ μƒκ°λ‚  κ²ƒ κ°™λ‹¤. λΉμΌλ΅ λ“±λ΅ν•λ©΄ ν•΄λ‹Ή λΉμ„ λ‹¤λ¥Έ κ³³μ— μ£Όμ…ν•΄μ„ μ‚¬μ©ν•  μ μλ”λ°, νΉμ • μΈν„°νμ΄μ¤ κµ¬ν„μ²΄λ¥Ό κ°κ° λΉμΌλ΅ λ“±λ΅ν• λ‹¤μ, ν•„μ”μ— λ”°λΌ μ£Όμ…ν•΄μ„ μ‚¬μ©ν•λ” λ¶€λ¶„μ΄ μ¶”μƒ ν©ν† λ¦¬ ν¨ν„΄κ³Ό κ΄€λ ¨λ κ²ƒ κ°™λ‹¤.
(μ‚¬μ‹¤ κ°•μ λ“¤μ„ λ• μƒκ°ν–λ”λ°, κ°•μ λ§μ§€λ§‰ λ¶€λ¶„μ— λ‚μ¤λ” λ‚΄μ©μ΄λ”λΌ)